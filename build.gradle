group 'me.lyinlong.tools'
version '1.0-SNAPSHOT'

apply plugin: 'java'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.9.1'
    compile group: 'org.jsoup', name: 'jsoup', version: '1.11.2'
    compile group: 'com.alibaba', name: 'fastjson', version: '1.2.45'



}

//指定JAR包 main方法
jar {
    manifest {
        attributes 'Main-Class': 'com.toptime.disspider.tools.main.ToolsStart'
    }
}
//依赖编译，然后打包JAR
task taskJar(type:Jar, dependsOn: compileJava) {
    from 'build/classes'
    destinationDir = file('build/libs')
}

//清除上次的编译过的文件
task clearPj(type:Delete){
    delete 'build','target'
}

//把JAR复制到目标目录
task release(type: Copy,dependsOn: [clearPj,taskJar]) {
    from('build/libs') {
        include '*.jar'
    }
    into ('target')
}

//导出依赖jar包
task copyJars(type:Copy) {
    from configurations.runtime
    into 'dist'
}
